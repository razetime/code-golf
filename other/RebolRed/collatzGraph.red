func[n][a: reduce[n]while[n > 1][append a n: either n % 2 < 1[n / 2][3 * n + 1]]x: to-pair m: last sort copy a view[base 500x500 draw append[line]collect[while[second a][keep as-pair(first a)/ m * 500(m - first a: next a)/ m * 500]]]]